<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>لوحة التحكم</title>
</head>
<body style="font-family: Arial; margin:20px;">
  <h1>📊 لوحة التحكم</h1>

  <h2>➕ إضافة / تعديل عميل</h2>
  <form method="POST" action="/admin/save?pass=admin123">
    <label>Client ID: <input type="text" name="id" required></label><br><br>
    <label>الاسم: <input type="text" name="name" required></label><br><br>
    <label>الرسالة: <input type="text" name="message"></label><br><br>
    <label>المدة بالأيام: <input type="number" name="days" value="30"></label><br><br>
    <button type="submit">💾 حفظ</button>
  </form>

  <h2>📋 قائمة العملاء</h2>
  <table border="1" cellpadding="5" id="clientsTable"></table>

  <br>
  <a href="/admin/export?pass=admin123">⬇️ تحميل CSV</a>

  <script>
    async function loadClients() {
      const res = await fetch('/admin/list?pass=admin123');
      const data = await res.json();
      const table = document.getElementById('clientsTable');
      table.innerHTML = "<tr><th>ID</th><th>الاسم</th><th>الرسالة</th><th>انتهاء الاشتراك</th></tr>";
      for (let id in data) {
        const c = data[id];
        table.innerHTML += `<tr>
          <td>${id}</td>
          <td>${c.name}</td>
          <td>${c.message}</td>
          <td>${c.expiry}</td>
        </tr>`;
      }
    }
    loadClients();
  </script>
</body>
</html>
<script src="admin.js"></script>
<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>تسجيل الدخول</title>
</head>
<body style="font-family: Arial; margin:20px;">
  <h1>🔐 تسجيل الدخول</h1>
  <form method="GET" action="/admin/doLogin">
    <label>كلمة السر: <input type="password" name="pass"></label>
    <button type="submit">➡️ دخول</button>
  </form>
</body>
</html>
