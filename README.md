# ุจูุช ูุงุชุณุงุจ ูุญุณู ููุชูุงูู ูุน Easy Order

## ูุธุฑุฉ ุนุงูุฉ

ูุฐุง ุงูุจูุช ูุตูู ูุฅุฑุณุงู ุฑุณุงุฆู ูุงุชุณุงุจ ุชุญุชูู ุนูู ุชูุงุตูู ุงูุทูุจุงุช ูุน ุฃุฒุฑุงุฑ ุชูุงุนููุฉ ููุชุฃููุฏ ุฃู ุงูุฅูุบุงุกุ ูุน ุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจ ุชููุงุฆูุงู ุนูู ูููุน Easy Order.

## ุงููููุฒุงุช ุงูุฑุฆูุณูุฉ

### ๐ ุงููุธุงุฆู ุงูุฃุณุงุณูุฉ
- **ุฅุฑุณุงู ุฑุณุงุฆู ุชูุงุนููุฉ**: ุฑุณุงุฆู ูุน ุฃุฒุฑุงุฑ ุชุฃููุฏ/ุฅูุบุงุก
- **ุชุญุฏูุซ ุชููุงุฆู**: ุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจ ูู Easy Order
- **ูุนุงูุฌุฉ ุฃุฎุทุงุก ูุชูุฏูุฉ**: ุฅุนุงุฏุฉ ุงููุญุงููุฉ ูุงูุชุนุงูู ูุน ุงูุฃุฎุทุงุก
- **ูุงุฌูุฉ ููุจ**: ููุญุฉ ุชุญูู ููุฑุงูุจุฉ ุงูุจูุช

### ๐ง ุงููููุฒุงุช ุงูุชูููุฉ
- **ุฏุนู endpoints ูุชุนุฏุฏุฉ**: ูุฌุฑุจ ุนุฏุฉ ููุงุท ููุงูุฉ ูู Easy Order API
- **ูุธุงู ุฅุนุงุฏุฉ ุงููุญุงููุฉ**: ูุญุงููุงุช ูุชุนุฏุฏุฉ ูุน ุชุฃุฎูุฑ ูุชุฒุงูุฏ
- **ุชุณุฌูู ุดุงูู**: ุญูุธ ุฌููุน ุงูุนูููุงุช ูุงูุฃุฎุทุงุก
- **ุงุฎุชุจุงุฑุงุช ุชููุงุฆูุฉ**: ุณูุฑูุจุชุงุช ุงุฎุชุจุงุฑ ุดุงููุฉ

## ูุชุทูุจุงุช ุงููุธุงู

- Node.js 18.0.0 ุฃู ุฃุญุฏุซ
- npm 8.0.0 ุฃู ุฃุญุฏุซ
- ุงุชุตุงู ุฅูุชุฑูุช ูุณุชูุฑ
- ุญุณุงุจ ูุงุชุณุงุจ ููุฑุจุท

## ุงูุชุซุจูุช ูุงูุฅุนุฏุงุฏ

### 1. ุชุญููู ุงููุดุฑูุน
```bash
git clone <repository-url>
cd whatsapp-bot-easyorder
```

### 2. ุชุซุจูุช ุงููุชุทูุจุงุช
```bash
npm install
```

### 3. ุฅุนุฏุงุฏ ูุชุบูุฑุงุช ุงูุจูุฆุฉ
```bash
cp .env.example .env
```

ูู ุจุชุญุฑูุฑ ููู `.env` ูุฅุถุงูุฉ ุงููุนูููุงุช ุงููุทููุจุฉ:

```env
# ุฅุนุฏุงุฏุงุช ุงูุฎุงุฏู
PORT=3000
HOST=0.0.0.0
NODE_ENV=production

# ุฅุนุฏุงุฏุงุช Easy Order API (ูุทููุจ)
EASY_ORDER_API_URL=https://your-easyorder-domain.com/api
EASY_ORDER_API_KEY=your-api-key-here

# ุฅุนุฏุงุฏุงุช ุงุฎุชูุงุฑูุฉ
WHATSAPP_SESSION_ID=auto-service-bot
API_SECRET=your-secret-key
AUTO_CLEANUP_HOURS=24
MAX_PENDING_ORDERS=1000
```

### 4. ุชุดุบูู ุงูุจูุช
```bash
# ููุชุทููุฑ
npm run dev

# ููุฅูุชุงุฌ
npm start
```

## ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุฑุจุท ูุงุชุณุงุจ
1. ุงูุชุญ ุงููุชุตูุญ ูุงุฐูุจ ุฅูู `http://localhost:3000`
2. ุงูุณุญ ุฑูุฒ QR ุจุงุณุชุฎุฏุงู ูุงุชุณุงุจ
3. ุงูุชุธุฑ ุญุชู ูุธูุฑ "ูุชุตู ููุนูู ุจูุฌุงุญ"

### 2. ุฅุฑุณุงู ุทูุจ ูู Easy Order
ุฃุฑุณู ุทูุจ POST ุฅูู `/send-order` ูุน ุงูุจูุงูุงุช ุงูุชุงููุฉ:

```json
{
  "order_id": "12345",
  "customer_name": "ุฃุญูุฏ ูุญูุฏ",
  "customer_phone": "201234567890",
  "total": 250,
  "address": "ุงููุงูุฑุฉุ ูุตุฑ ุงูุฌุฏูุฏุฉ",
  "items": [
    {
      "name": "ููุชุฌ 1",
      "price": 100,
      "quantity": 1
    },
    {
      "name": "ููุชุฌ 2", 
      "price": 150,
      "quantity": 1
    }
  ]
}
```

### 3. ูุนุงูุฌุฉ ุฑุฏูุฏ ุงูุนููุงุก
ุงูุจูุช ูุชุนุงูู ุชููุงุฆูุงู ูุน:
- ุงูุถุบุท ุนูู ุฃุฒุฑุงุฑ ุงูุชุฃููุฏ/ุงูุฅูุบุงุก
- ุงูุฑุฏูุฏ ุงููุตูุฉ (ููุงููุ ุชุฃููุฏุ ุฅูุบุงุกุ ุฑูุถ)
- ุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจ ูู Easy Order

## API Endpoints

### ุงูุฃุณุงุณูุฉ
- `GET /` - ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ูุญุงูุฉ ุงูุจูุช
- `GET /health` - ูุญุต ุตุญุฉ ุงูุฎุงุฏู
- `POST /send-order` - ุฅุฑุณุงู ุทูุจ ุฌุฏูุฏ
- `GET /pending-orders` - ุนุฑุถ ุงูุทูุจุงุช ุงููุนููุฉ

### ุงูุฅุฏุงุฑุฉ
- `POST /restart` - ุฅุนุงุฏุฉ ุชุดุบูู ุงูุจูุช
- `POST /cleanup` - ุชูุธูู ุงูุทูุจุงุช ุงูููุชููุฉ ุงูุตูุงุญูุฉ
- `POST /broadcast` - ุฅุฑุณุงู ุฑุณุงูุฉ ุฌูุงุนูุฉ
- `GET /stats` - ุฅุญุตุงุฆูุงุช ููุตูุฉ

### ุงูุงุฎุชุจุงุฑ
- `POST /test-send` - ุฅุฑุณุงู ุฑุณุงูุฉ ุชุฌุฑูุจูุฉ
- `POST /cancel-order/:orderId` - ุฅูุบุงุก ุทูุจ ูุนูู

## ูููู ุงููุดุฑูุน

```
whatsapp-bot/
โโโ improved-bot.js          # ุงูููู ุงูุฑุฆูุณู ููุจูุช
โโโ easyorder-api.js         # ูุนุงูุฌ Easy Order API
โโโ test-bot.js              # ุงุฎุชุจุงุฑุงุช ุงูุจูุช
โโโ test-easyorder.js        # ุงุฎุชุจุงุฑุงุช Easy Order API
โโโ package.json             # ูุนูููุงุช ุงููุดุฑูุน
โโโ .env.example             # ูุซุงู ุนูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ
โโโ README.md                # ูุฐุง ุงูููู
โโโ auth_info/               # ุจูุงูุงุช ุชุณุฌูู ุฏุฎูู ูุงุชุณุงุจ
โโโ *.log                    # ูููุงุช ุงูุณุฌูุงุช
โโโ *_backup.json            # ูุณุฎ ุงุญุชูุงุทูุฉ
โโโ failed_updates.json      # ุงูุทูุจุงุช ุงููุงุดูุฉ
```

## ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑ ุงูุจูุช
```bash
node test-bot.js
```

### ุงุฎุชุจุงุฑ Easy Order API
```bash
node test-easyorder.js
```

### ุงุฎุชุจุงุฑ ูุณุชูุฑ
```bash
node test-bot.js --continuous 60000  # ุงุฎุชุจุงุฑ ููุฏุฉ ุฏูููุฉ
```

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดุงูู ุดุงุฆุนุฉ

#### 1. ุงูุจูุช ูุง ูุชุตู ุจูุงุชุณุงุจ
- ุชุฃูุฏ ูู ูุณุญ ุฑูุฒ QR ุจุดูู ุตุญูุญ
- ุชุญูู ูู ุงุชุตุงู ุงูุฅูุชุฑูุช
- ุงูุณุญ ูุฌูุฏ `auth_info` ูุฃุนุฏ ุงููุญุงููุฉ

#### 2. ูุดู ูู ุฅุฑุณุงู ุงูุฑุณุงุฆู
- ุชุฃูุฏ ูู ุฃู ุงูุจูุช ูุชุตู (ุญุงูุฉ "ูุชุตู")
- ุชุญูู ูู ุตุญุฉ ุฑูู ุงููุงุชู
- ุฑุงุฌุน ููู `bot.log` ููุฃุฎุทุงุก

#### 3. ูุดู ุชุญุฏูุซ Easy Order
- ุชุญูู ูู ุตุญุฉ `EASY_ORDER_API_URL` ู `EASY_ORDER_API_KEY`
- ุฑุงุฌุน ููู `failed_updates.json` ููุทูุจุงุช ุงููุงุดูุฉ
- ุงุณุชุฎุฏู `node test-easyorder.js` ูุงุฎุชุจุงุฑ ุงูุงุชุตุงู

### ูููุงุช ุงูุณุฌูุงุช
- `bot.log` - ุณุฌู ุงูุจูุช ุงูุฑุฆูุณู
- `successful_updates.json` - ุงูุชุญุฏูุซุงุช ุงููุงุฌุญุฉ
- `failed_updates.json` - ุงูุชุญุฏูุซุงุช ุงููุงุดูุฉ
- `bot_test_report.json` - ุชูุฑูุฑ ุงูุงุฎุชุจุงุฑุงุช
- `easyorder_test_report.json` - ุชูุฑูุฑ ุงุฎุชุจุงุฑ Easy Order

## ุงูุชูุงูู ูุน Easy Order

### ูุชุทูุจุงุช API
ุงูุจูุช ูุญุชุงุฌ ุฅูู:
1. **URL ุงูุฃุณุงุณู** ูู Easy Order API
2. **ููุชุงุญ API** ูููุตุงุฏูุฉ
3. **Endpoint** ูุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจ

### Endpoints ุงููุฏุนููุฉ
ุงูุจูุช ูุฌุฑุจ ุชููุงุฆูุงู ุนุฏุฉ endpoints:
- `/orders/{orderId}/update-status`
- `/orders/{orderId}/status`
- `/order/update/{orderId}`
- `/webhook/order-status`
- `/api/orders/{orderId}/status`
- `/v1/orders/{orderId}/update`

### ุจูุงูุงุช ุงูุชุญุฏูุซ ุงููุฑุณูุฉ
```json
{
  "order_id": "12345",
  "status": "confirmed", // ุฃู "cancelled"
  "updated_at": "2023-12-01T10:00:00.000Z",
  "notes": "ุชู ุชุฃููุฏ ุงูุทูุจ ุนุจุฑ WhatsApp Bot",
  "customer_phone": "201234567890",
  "customer_name": "ุฃุญูุฏ ูุญูุฏ",
  "bot_version": "3.0",
  "source": "whatsapp_bot"
}
```

## ุงูุฃูุงู

### ุฃูุถู ุงูููุงุฑุณุงุช
- ุงุญุชูุธ ุจู `EASY_ORDER_API_KEY` ุณุฑูุงู
- ุงุณุชุฎุฏู HTTPS ูู ุงูุฅูุชุงุฌ
- ุฑุงูุจ ูููุงุช ุงูุณุฌูุงุช ุจุงูุชุธุงู
- ูู ุจุนูู ูุณุฎ ุงุญุชูุงุทูุฉ ูู `auth_info`

### ูุชุบูุฑุงุช ุงูุจูุฆุฉ ุงูุญุณุงุณุฉ
```env
EASY_ORDER_API_KEY=your-secret-key
API_SECRET=webhook-secret
EASY_ORDER_WEBHOOK_SECRET=another-secret
```

## ุงููุดุฑ

### ุนูู ุฎุงุฏู ูุญูู
```bash
# ุชุซุจูุช PM2 ูุฅุฏุงุฑุฉ ุงูุนูููุงุช
npm install -g pm2

# ุชุดุบูู ุงูุจูุช
pm2 start improved-bot.js --name whatsapp-bot

# ูุฑุงูุจุฉ ุงูุจูุช
pm2 monit
```

### ุนูู ุงูุณุญุงุจุฉ
1. ุฑูุน ุงููููุงุช ุฅูู ุงูุฎุงุฏู
2. ุชุซุจูุช ุงููุชุทูุจุงุช: `npm install`
3. ุฅุนุฏุงุฏ ูุชุบูุฑุงุช ุงูุจูุฆุฉ
4. ุชุดุบูู ุงูุจูุช: `npm start`

## ุงููุณุงููุฉ

### ุฅุถุงูุฉ ูููุฒุงุช ุฌุฏูุฏุฉ
1. Fork ุงููุดุฑูุน
2. ุฅูุดุงุก branch ุฌุฏูุฏ
3. ุฅุถุงูุฉ ุงูุชุญุณููุงุช
4. ุฅุฑุณุงู Pull Request

### ุงูุฅุจูุงุบ ุนู ูุดุงูู
ุงุณุชุฎุฏู GitHub Issues ูุน:
- ูุตู ุงููุดููุฉ
- ุฎุทูุงุช ุฅุนุงุฏุฉ ุงูุฅูุชุงุฌ
- ูููุงุช ุงูุณุฌูุงุช ุฐุงุช ุงูุตูุฉ

## ุงูุชุฑุฎูุต

MIT License - ุฑุงุฌุน ููู LICENSE ููุชูุงุตูู

## ุงูุฏุนู

ููุญุตูู ุนูู ุงูุฏุนู:
1. ุฑุงุฌุน ูุฐุง ุงูุฏููู ุฃููุงู
2. ุชุญูู ูู ูููุงุช ุงูุณุฌูุงุช
3. ุฌุฑุจ ุณูุฑูุจุชุงุช ุงูุงุฎุชุจุงุฑ
4. ุงุชุตู ุจูุฑูู ุงูุชุทููุฑ

---

**ููุงุญุธุฉ**: ูุฐุง ุงูุจูุช ูุตูู ุฎุตูุตุงู ููุชูุงูู ูุน Easy Order. ูุฏ ุชุญุชุงุฌ ุฅูู ุชุนุฏููุงุช ููุนูู ูุน ุฃูุธูุฉ ุฃุฎุฑู.